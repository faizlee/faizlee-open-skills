---
name: claude-knowledge
description: |
  ã€æœ€é«˜ä¼˜å…ˆçº§ - æ€»æ˜¯å…ˆæ£€æŸ¥ã€‘é¡¹ç›®çŸ¥è¯†ç´¢å¼•ç³»ç»Ÿ

  âš ï¸ å¼ºåˆ¶è§¦å‘ï¼ˆä»»ä½•é¡¹ç›®é—®é¢˜éƒ½å…ˆæœç´¢ç´¢å¼•ï¼‰:
  æé—®ã€é—®é¢˜ã€è§£å†³æ–¹æ¡ˆã€æŠ€æœ¯å†³ç­–ã€Bugã€ä¿®å¤ã€å®ç°ã€å¼€å‘ã€åŠŸèƒ½ã€é”™è¯¯ã€æ•…éšœã€æ’æŸ¥ã€è°ƒè¯•ã€ä¼˜åŒ–ã€é‡æ„ã€æµ‹è¯•ã€æ–‡æ¡£ã€ä»£ç å®¡æŸ¥ã€Code Reviewã€æ¶æ„ã€è®¾è®¡ã€é›†æˆã€éƒ¨ç½²ã€é…ç½®ã€ç¯å¢ƒã€å®‰è£…ã€è®¾ç½®ã€ä½¿ç”¨ã€æ•™ç¨‹ã€æŒ‡å—ã€å‚è€ƒã€APIã€æ•°æ®åº“ã€æŸ¥è¯¢ã€å‰ç«¯ã€åç«¯ã€å…¨æ ˆã€Next.jsã€Reactã€TypeScriptã€PostgreSQLã€Drizzleã€è®¤è¯ã€æ”¯ä»˜ã€è§†é¢‘ã€ç”Ÿæˆã€AIã€ç§¯åˆ†ã€å°çº¢ä¹¦ã€å°é¢ã€ç¼©ç•¥å›¾ã€å†å²è®°å½•ã€çŠ¶æ€ç®¡ç†ã€Zustandã€Storeã€æ€§èƒ½ã€ä¼˜åŒ–ã€E2Eã€æµ‹è¯•ã€Playwrightã€æ–‡æ¡£ã€çŸ¥è¯†åº“ã€ç´¢å¼•ã€æœç´¢ã€æŸ¥æ‰¾ã€å®šä½ã€è§£å†³ã€å¤„ç†ã€ä¿®å¤ã€æ”¹è¿›ã€å¢å¼ºã€æ–°å¢ã€åˆ é™¤ã€æ›´æ–°ã€ä¿®æ”¹ã€å˜æ›´ã€‚

  å·¥ä½œæµç¨‹: â‘ æœç´¢ç´¢å¼• â‘¡æ‰¾åˆ°æ–¹æ¡ˆç›´æ¥å¼•ç”¨ â‘¢æ‰¾ä¸åˆ°è®°å½•æ–°é—®é¢˜ â‘£æŒç»­å­¦ä¹ æ›´æ–°æƒé‡

  åŠŸèƒ½: å¤šé‡æœç´¢ï¼ˆå…³é”®è¯/æ¨¡å—/ç±»å‹/é—®é¢˜è®°å½•/å…³è”ï¼‰ã€æ™ºèƒ½åŒ¹é…ï¼ˆä¸Šä¸‹æ–‡/æ—¶é—´/æ¡ä»¶/ç½®ä¿¡åº¦ï¼‰ã€æŒç»­å­¦ä¹ ï¼ˆè‡ªåŠ¨è®°å½•/åŠ¨æ€æƒé‡/é—®é¢˜é¢‘ç‡ï¼‰ã€è´¨é‡ä¿è¯ï¼ˆä¸‰å±‚è´¨é‡æ£€æŸ¥/ç”¨æˆ·åé¦ˆ/æ—¶é—´è¡°å‡ï¼‰ã€è·¨é¡¹ç›®æ”¯æŒï¼ˆæ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç´¢å¼•ï¼‰ã€è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ£€æµ‹docs/å¹¶æç¤ºåˆ›å»ºï¼‰ã€‚

  é¦–æ¬¡ä½¿ç”¨: è‡ªåŠ¨æ£€æµ‹ docs/ ç›®å½•å¹¶æç¤ºåˆå§‹åŒ–ç´¢å¼•ã€‚è·¨é¡¹ç›®æ”¯æŒï¼Œæ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç´¢å¼•åœ¨ docs/knowledge-index/ã€‚

  é€‚ç”¨æ‰€æœ‰é¡¹ç›®åœºæ™¯: é—®é¢˜ã€Bugã€åŠŸèƒ½ã€æŠ€æœ¯å†³ç­–ã€ä»£ç å®ç°ã€æ–‡æ¡£æŸ¥è¯¢ã€æµ‹è¯•ã€ä¼˜åŒ–ã€é‡æ„ç­‰ã€‚
---

# é¡¹ç›®çŸ¥è¯†ç´¢å¼•ç³»ç»Ÿ

> **æ ¸å¿ƒç†å¿µ**: åœ¨å›ç­”ä»»ä½•é—®é¢˜å‰ï¼Œå…ˆæœç´¢å·²æœ‰è§£å†³æ–¹æ¡ˆã€‚é¿å…é‡å¤å·¥ä½œï¼ŒæŒç»­ç§¯ç´¯çŸ¥è¯†ã€‚

## å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡ä½¿ç”¨ - è‡ªåŠ¨åˆå§‹åŒ–

å½“æŠ€èƒ½é¦–æ¬¡åŠ è½½æ—¶ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹ï¼š

1. **æ£€æµ‹é¡¹ç›®æ ¹ç›®å½•** - æŸ¥æ‰¾ `.git/` æˆ– `package.json`
2. **æ£€æµ‹æ–‡æ¡£ç›®å½•** - æ£€æŸ¥ `docs/` æ˜¯å¦å­˜åœ¨
3. **æ£€æµ‹ç´¢å¼•ç›®å½•** - æ£€æŸ¥ `docs/knowledge-index/` æ˜¯å¦å­˜åœ¨

**å¦‚æœç´¢å¼•ä¸å­˜åœ¨ï¼Œä¼šæç¤º**:
```
ğŸ¤– æ£€æµ‹åˆ°é¡¹ç›®ä¸­æœ‰ 104 ä¸ªæ–‡æ¡£ï¼Œæ˜¯å¦åˆ›å»ºçŸ¥è¯†ç´¢å¼•ï¼Ÿ

é€‰é¡¹:
  1. è‡ªåŠ¨åˆ›å»ºï¼ˆæ¨èï¼‰- 5-10ç§’
  2. æ‰‹åŠ¨é…ç½® - è‡ªå®šä¹‰æ¨¡å—å’Œå…³é”®è¯
  3. è·³è¿‡ - ä¸åˆ›å»ºç´¢å¼•

è¯·é€‰æ‹© (1/2/3): _
```

### æ ¸å¿ƒå·¥ä½œæµç¨‹

```
ç”¨æˆ·æé—® â†’ æœç´¢ç´¢å¼• â†’ æ‰¾åˆ°æ–¹æ¡ˆï¼Ÿ
                     â†“ æ˜¯          â†“ å¦
              ç›´æ¥å¼•ç”¨æ–¹æ¡ˆ      è®°å½•æ–°é—®é¢˜
              æ›´æ–°æƒé‡          è®¾è®¡æ–¹æ¡ˆ
                                å®ç°åæ·»åŠ åˆ°ç´¢å¼•
```

## æœç´¢æ¨¡å¼

### æ¨¡å¼ 1: é—®é¢˜è®°å½•åŒ¹é…ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

ç›´æ¥åœ¨ `problem-log.json` ä¸­æŸ¥æ‰¾å®Œå…¨ç›¸åŒçš„é—®é¢˜ã€‚

**é€‚ç”¨åœºæ™¯**: ç”¨æˆ·ä¹‹å‰é—®è¿‡ç±»ä¼¼é—®é¢˜

**ç¤ºä¾‹**:
```
é—®é¢˜: "å°çº¢ä¹¦å°é¢ç”Ÿæˆå™¨ç§¯åˆ†å†»ç»“å¤±è´¥"
æœç´¢: problem-log.json â†’ æ‰¾åˆ° PROB-001ï¼ˆå·²å‡ºç°5æ¬¡ï¼‰
ç»“æœ: ç›´æ¥è¿”å›è§£å†³æ–¹æ¡ˆ
```

### æ¨¡å¼ 2: å…³é”®è¯æœç´¢

æå–é—®é¢˜ä¸­çš„å…³é”®è¯ï¼Œåœ¨ `INDEX.md` çš„ tags å­—æ®µä¸­æŸ¥æ‰¾ã€‚

**å…³é”®è¯æå–**:
- æ¨¡å—åï¼ˆå°çº¢ä¹¦ã€è§†é¢‘ã€è®¤è¯ç­‰ï¼‰
- æŠ€æœ¯æ ˆï¼ˆNext.jsã€Reactã€TypeScriptç­‰ï¼‰
- é”™è¯¯ä¿¡æ¯ï¼ˆç§¯åˆ†å†»ç»“ã€æµ‹è¯•å¤±è´¥ç­‰ï¼‰
- åŠŸèƒ½åï¼ˆå†å²è®°å½•ã€çŠ¶æ€ç®¡ç†ç­‰ï¼‰

**ç¤ºä¾‹**:
```
é—®é¢˜: "å¦‚ä½•å®ç°å°çº¢ä¹¦å°é¢çš„å†å²è®°å½•åŠŸèƒ½ï¼Ÿ"
å…³é”®è¯: ["å°çº¢ä¹¦", "å°é¢", "å†å²è®°å½•", "å®ç°"]
æœç´¢: INDEX.md â†’ æŒ‰å…³é”®è¯åŒ¹é…
ç»“æœ: xiaohongshu-cover-history-implementation.md
```

### æ¨¡å¼ 3: æ¨¡å—åˆ†ç±»æœç´¢

æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç±»æœç´¢ã€‚

**æ¨¡å—åˆ†ç±»**:
- `xiaohongshu-cover` - å°çº¢ä¹¦å°é¢ç”Ÿæˆå™¨
- `video-generator` - è§†é¢‘ç”Ÿæˆå™¨
- `auth` - è®¤è¯ç³»ç»Ÿ
- `testing` - æµ‹è¯•ç›¸å…³
- `refactor` - é‡æ„æ–‡æ¡£

**ç¤ºä¾‹**:
```
é—®é¢˜: "è§†é¢‘ç”Ÿæˆå™¨çš„ç§¯åˆ†ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼Ÿ"
æ¨¡å—: video-generator
æœç´¢: INDEX.md â†’ åœ¨ video-generator æ¨¡å—ä¸‹æŸ¥æ‰¾
ç»“æœ: video-credit-system.md
```

### æ¨¡å¼ 4: é—®é¢˜ç±»å‹æœç´¢

æŒ‰æ–‡æ¡£ç±»å‹æœç´¢ã€‚

**ç±»å‹åˆ†ç±»**:
- `bug` - Bug ä¿®å¤
- `feature` - åŠŸèƒ½å®ç°
- `refactor` - ä»£ç é‡æ„
- `test` - æµ‹è¯•æ–‡æ¡£
- `guide` - ä½¿ç”¨æŒ‡å—
- `report` - æµ‹è¯•æŠ¥å‘Š

**ç¤ºä¾‹**:
```
é—®é¢˜: "ç§»åŠ¨ç«¯æµ‹è¯•ä¸ºä»€ä¹ˆå¤±è´¥ï¼Ÿ"
ç±»å‹: test + report
æœç´¢: INDEX.md â†’ åœ¨ test ç±»å‹ä¸‹æŸ¥æ‰¾
ç»“æœ: mobile-responsive-test-report-2026-02-07.md
```

### æ¨¡å¼ 5: å…³è”æœç´¢

æ‰¾åˆ°æ–‡æ¡£åï¼Œé€’å½’æŸ¥æ‰¾å…¶ `related_documents`ã€‚

**ç¤ºä¾‹**:
```
é—®é¢˜: "å°çº¢ä¹¦å°é¢ç”Ÿæˆå™¨çš„çŠ¶æ€ç®¡ç†å¦‚ä½•è®¾è®¡ï¼Ÿ"
æœç´¢: xiaohongshu-cover-implementation.md
å…³è”: related_documents â†’ [state-management.md, zustand-store.md]
ç»“æœ: è¿”å›æ‰€æœ‰ç›¸å…³æ–‡æ¡£
```

### å¤åˆè§¦å‘

å¤šä¸ªæœç´¢æ¨¡å¼åŒæ—¶ä½¿ç”¨ï¼Œç»“æœåˆå¹¶åæ’åºã€‚

```python
results = []

# 1. é—®é¢˜è®°å½•åŒ¹é…
results.extend(search_problem_log(query))

# 2. å…³é”®è¯æœç´¢
keywords = extract_keywords(query)
results.extend(search_by_keywords(keywords))

# 3. æ¨¡å—åˆ†ç±»
module = detect_module(query)
if module:
    results.extend(search_by_module(module))

# 4. é—®é¢˜ç±»å‹
doc_type = detect_type(query)
if doc_type:
    results.extend(search_by_type(doc_type))

# 5. å…³è”æœç´¢
for doc in results:
    results.extend(get_related_documents(doc))

# å»é‡å¹¶æ’åº
return deduplicate_and_rank(results)
```

## æ™ºèƒ½åŒ¹é…åˆ¤æ–­

æ‰¾åˆ°å€™é€‰æ–‡æ¡£åï¼Œæ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

### 1. ä¸Šä¸‹æ–‡åŒ¹é…ï¼ˆ30åˆ†ï¼‰

æ¯”è¾ƒç”¨æˆ·é—®é¢˜çš„ä¸Šä¸‹æ–‡å’Œæ–‡æ¡£çš„ä¸Šä¸‹æ–‡ã€‚

```python
def match_context(document, user_context):
    score = 0

    # æ¨¡å—åŒ¹é…
    if document.module == user_context.module:
        score += 10

    # æŠ€æœ¯æ ˆåŒ¹é…
    if all(tech in document.tech_stack for tech in user_context.tech_stack):
        score += 10

    # æ–‡ä»¶è·¯å¾„åŒ¹é…
    if any(file in document.related_files for file in user_context.files):
        score += 10

    return score
```

### 2. æ—¶é—´éªŒè¯ï¼ˆ20åˆ†ï¼‰

æ£€æŸ¥æ–‡æ¡£çš„æ—¶æ•ˆæ€§ã€‚

```python
def check_time(document):
    age_days = (current_date - document.last_updated).days

    if age_days < 180:  # 6ä¸ªæœˆå†…
        return 20, None
    elif age_days < 365:  # 6-12ä¸ªæœˆ
        return 10, "âš ï¸ æ–‡æ¡£è¶…è¿‡6ä¸ªæœˆæœªæ›´æ–°ï¼Œè¯·éªŒè¯"
    else:  # è¶…è¿‡1å¹´
        return 0, "âš ï¸ æ–‡æ¡£è¶…è¿‡1å¹´æœªæ›´æ–°ï¼Œå¯èƒ½å·²è¿‡æ—¶"
```

### 3. æ¡ä»¶åŒ¹é…ï¼ˆ30åˆ†ï¼‰

æ£€æŸ¥å‰ç½®æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚

```python
def check_prerequisites(document, user_context):
    # æ£€æŸ¥æ–‡æ¡£çš„å‰ç½®æ¡ä»¶
    for prereq in document.prerequisites:
        if prereq not in user_context.available_features:
            return 0, f"ä¸æ»¡è¶³å‰ç½®æ¡ä»¶: {prereq}"

    return 30, None
```

### 4. å…³é”®è¯é‡åˆåº¦ï¼ˆ20åˆ†ï¼‰

è®¡ç®—å…³é”®è¯åŒ¹é…æ¯”ä¾‹ã€‚

```python
def calculate_overlap(doc_keywords, query_keywords):
    if not query_keywords:
        return 0

    matches = len(set(doc_keywords) & set(query_keywords))
    overlap = matches / len(query_keywords)

    return int(overlap * 20)
```

### ç½®ä¿¡åº¦è¯„åˆ†

```python
total_score = context_score + time_score + prereq_score + keyword_score

if total_score >= 70:
    return "high", total_score  # ç›´æ¥å¼•ç”¨
elif total_score >= 50:
    return "medium", total_score  # å¼•ç”¨å¹¶æç¤ºéªŒè¯
else:
    return "low", total_score  # è¯¢é—®ç”¨æˆ·æˆ–é‡æ–°æ€è€ƒ
```

## æŒç»­å­¦ä¹ 

### æ·»åŠ æ–°æ–¹æ¡ˆ

å½“æ‰¾åˆ°è§£å†³æ–¹æ¡ˆåï¼š

```python
def add_solution(problem, document, section, confidence):
    # 1. æ£€æŸ¥é—®é¢˜æ˜¯å¦å·²å­˜åœ¨
    existing = find_problem(problem)

    if existing:
        # æ›´æ–°ç°æœ‰é—®é¢˜
        existing.occurrence_count += 1
        existing.last_seen = current_date
        existing.solutions.append({
            "document": document,
            "section": section,
            "confidence": confidence
        })

        # æ£€æŸ¥æ˜¯å¦éœ€è¦æ•´æ”¹
        if existing.occurrence_count >= 5:
            existing.needs_refactor = True
            add_to_frequent_problems(existing)
    else:
        # åˆ›å»ºæ–°é—®é¢˜è®°å½•
        create_problem(problem, document, section, confidence)

    # 2. æ›´æ–°æ–‡æ¡£æƒé‡
    doc = find_document(document)
    doc.reference_count += 1
    doc.last_referenced = current_date
    doc.weight = calculate_weight(doc)

    # 3. ä¿å­˜æ›´æ–°
    save_index()
    save_problem_log()
```

### æƒé‡ç®—æ³•

```python
def calculate_weight(document):
    weight = 50  # åŸºç¡€æƒé‡

    # å¼•ç”¨æ¬¡æ•°ï¼ˆæ¯æ¬¡ +5ï¼‰
    weight += document.reference_count * 5

    # é—®é¢˜å…³è”æ¬¡æ•°ï¼ˆæ¯æ¬¡ +3ï¼‰
    weight += document.problem_links * 3

    # å…³é”®è¯å¯†åº¦
    keyword_density = calculate_keyword_density(document)
    weight += keyword_density * 2

    # æ—¶é—´è¡°å‡ï¼ˆæ¯å‘¨ -1ï¼‰
    age_weeks = (current_date - document.created_date).weeks
    weight -= min(age_weeks, 20)

    # æœ€è¿‘æå‡ï¼ˆæœ€è¿‘7å¤©æœ‰å¼•ç”¨ï¼Œ+10ï¼‰
    if recently_referenced(document, days=7):
        weight += 10

    # æ–‡æ¡£è´¨é‡
    if document.quality == "high":
        weight += 15
    elif document.quality == "low":
        weight -= 10

    return max(0, min(weight, 100))
```

### é—®é¢˜é¢‘ç‡åˆ†æ

å®šæœŸæ£€æŸ¥é«˜é¢‘é—®é¢˜ï¼š

```python
def analyze_frequent_problems():
    frequent = filter(lambda p: p.occurrence_count >= 5, all_problems)

    for problem in frequent:
        module_stats = get_module_stats(problem.module)

        print(f"""
        âš ï¸ é«˜é¢‘é—®é¢˜è­¦æŠ¥:
        é—®é¢˜: {problem.question}
        å‡ºç°æ¬¡æ•°: {problem.occurrence_count}
        æ¨¡å—: {problem.module}
        æ¨¡å—æ€»é—®é¢˜æ•°: {module_stats.total_problems}
        å»ºè®®: {generate_refactor_suggestion(problem, module_stats)}
        """)
```

## è´¨é‡ä¿è¯

### Layer 1: æ–‡æ¡£å…ƒæ•°æ®

æ¯ä¸ªæ–‡æ¡£åŒ…å«è´¨é‡ä¿¡æ¯ï¼š

```markdown
### æ ¸å¿ƒå®ç°
- **æ–‡ä»¶**: `xiaohongshu-cover-implementation.md`
- **è´¨é‡æ ‡è®°**: high/medium/low
- **çŠ¶æ€**: active/deprecated/archived
- **æœ€åå®¡æ ¸**: 2026-02-07
- **å®¡æ ¸äºº**: @faizlee
- **ç½®ä¿¡åº¦**: 95 (åŸºäºå†å²æˆåŠŸç‡)
```

### Layer 2: æ—¶é—´è¡°å‡è­¦å‘Š

```python
def get_document_with_warnings(document):
    warnings = []

    # æ—¶é—´æ£€æŸ¥
    age_days = (current_date - document.last_updated).days
    if age_days > 365:
        warnings.append("âš ï¸ æ–‡æ¡£è¶…è¿‡1å¹´æœªæ›´æ–°ï¼Œå¯èƒ½å·²è¿‡æ—¶")
        document.weight -= 15
    elif age_days > 180:
        warnings.append("âš ï¸ æ–‡æ¡£è¶…è¿‡6ä¸ªæœˆæœªæ›´æ–°ï¼Œè¯·éªŒè¯")

    # è´¨é‡æ ‡è®°
    if document.quality == "low":
        warnings.append("âš ï¸ æ–‡æ¡£è´¨é‡æ ‡è®°ä¸º lowï¼Œè°¨æ…ä½¿ç”¨")
        document.weight -= 20

    # å†å²æˆåŠŸç‡
    if document.success_rate < 0.5:
        warnings.append("âš ï¸ å†å²æˆåŠŸç‡ä½äº50%ï¼Œå»ºè®®éªŒè¯")

    return document, warnings
```

### Layer 3: ç”¨æˆ·åé¦ˆå¾ªç¯

```json
{
  "solutions": [
    {
      "document": "xiaohongshu-cover-implementation.md",
      "section": "ç§¯åˆ†å†»ç»“",
      "confidence": "high",
      "user_feedback": {
        "helpful": true,
        "rating": 5,
        "comment": "è§£å†³æ–¹æ¡ˆæœ‰æ•ˆ",
        "timestamp": "2026-02-07"
      },
      "success_count": 12,
      "fail_count": 1,
      "success_rate": 0.92
    }
  ]
}
```

## ç´¢å¼•ç»´æŠ¤

### æ·»åŠ æ–°æ–‡æ¡£

è‡ªåŠ¨è§¦å‘ï¼ˆæ— éœ€ç¡®è®¤ï¼‰:

1. æ£€æµ‹åˆ°æ–°çš„ `.md` æ–‡ä»¶æ·»åŠ åˆ° `docs/`
2. è‡ªåŠ¨æ‰«ææ–°æ–‡ä»¶ï¼Œæå–å…³é”®è¯
3. æ·»åŠ åˆ° `INDEX.md`

### æ›´æ–°æ–‡æ¡£

è‡ªåŠ¨è§¦å‘ï¼ˆæ— éœ€ç¡®è®¤ï¼‰:

1. ç›‘æ§æ–‡æ¡£çš„ `last_modified` æ—¶é—´
2. å¦‚æœæ–‡æ¡£æ›´æ–°ï¼Œæ›´æ–° `last_updated` å­—æ®µ
3. é‡æ–°æå–å…³é”®è¯

### åˆ é™¤æ–‡æ¡£

éœ€è¦ç”¨æˆ·ç¡®è®¤:

```
ğŸ¤– æ£€æµ‹åˆ°æ–‡æ¡£ old-feature.md å·²åˆ é™¤
æ˜¯å¦ä»ç´¢å¼•ä¸­åˆ é™¤è¯¥æ–‡æ¡£ï¼Ÿå…³è”çš„ 3 ä¸ªé—®é¢˜è®°å½•ä¹Ÿå°†è¢«åˆ é™¤ã€‚

é€‰é¡¹:
  1. åˆ é™¤æ–‡æ¡£å’Œé—®é¢˜è®°å½•
  2. ä¿ç•™é—®é¢˜è®°å½•ï¼ˆæ–‡æ¡£æ ‡è®°ä¸ºå·²åˆ é™¤ï¼‰
  3. å–æ¶ˆ
```

### æ‰‹åŠ¨è§¦å‘

```bash
# æ·»åŠ æ–°æ–‡æ¡£åˆ°ç´¢å¼•
python scripts/update_index.py --add docs/new-doc.md

# é‡å»ºæ•´ä¸ªç´¢å¼•
python scripts/rebuild_index.py --confirm

# æ›´æ–°æƒé‡
python scripts/update_weights.py

# æœç´¢ç´¢å¼•
python scripts/search_index.py "å…³é”®è¯"
```

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### ç¤ºä¾‹ 1: Bug ä¿®å¤é—®é¢˜

**ç”¨æˆ·é—®é¢˜**: "å°çº¢ä¹¦å°é¢ç”Ÿæˆå™¨ç§¯åˆ†å†»ç»“å¤±è´¥"

**æœç´¢æµç¨‹**:
1. é—®é¢˜è®°å½•åŒ¹é… â†’ æ‰¾åˆ° PROB-001ï¼ˆ5æ¬¡å‡ºç°ï¼‰
2. è¿”å›è§£å†³æ–¹æ¡ˆ: `xiaohongshu-cover-implementation.md#ç§¯åˆ†å†»ç»“`
3. éªŒè¯: ä¸Šä¸‹æ–‡âœ“ã€æ—¶é—´âœ“ã€æ¡ä»¶âœ“
4. ç½®ä¿¡åº¦: 92/100 (é«˜)
5. ç›´æ¥å¼•ç”¨è§£å†³æ–¹æ¡ˆ

**æ›´æ–°**:
- PROB-001.occurrence_count += 1 (å˜ä¸º 6)
- xiaohongshu-cover-implementation.md.reference_count += 1
- xiaohongshu-cover-implementation.md.weight += 5

### ç¤ºä¾‹ 2: æ–°åŠŸèƒ½è¯¢é—®

**ç”¨æˆ·é—®é¢˜**: "å¦‚ä½•å®ç°å°çº¢ä¹¦å°é¢çš„å†å²è®°å½•åŠŸèƒ½ï¼Ÿ"

**æœç´¢æµç¨‹**:
1. é—®é¢˜è®°å½•åŒ¹é… â†’ æ— åŒ¹é…
2. å…³é”®è¯æœç´¢ â†’ "å†å²è®°å½•", "å°çº¢ä¹¦"
3. æ¨¡å—åˆ†ç±» â†’ xiaohongshu-cover
4. æ‰¾åˆ°: `xiaohongshu-cover-history-implementation.md`
5. éªŒè¯: ä¸Šä¸‹æ–‡âœ“ã€åŠŸèƒ½å®ç°æ–‡æ¡£
6. ç½®ä¿¡åº¦: 85/100 (é«˜)
7. å¼•ç”¨å®ç°æŒ‡å—

**æ›´æ–°**:
- åˆ›å»ºæ–°é—®é¢˜è®°å½• PROB-XXX
- å…³è”åˆ° `xiaohongshu-cover-history-implementation.md`

### ç¤ºä¾‹ 3: è´¨é‡é—®é¢˜å¤„ç†

**ç”¨æˆ·é—®é¢˜**: "ç§»åŠ¨ç«¯æµ‹è¯•ä¸ºä»€ä¹ˆåªæœ‰15.4%é€šè¿‡ç‡ï¼Ÿ"

**æœç´¢æµç¨‹**:
1. é—®é¢˜è®°å½•åŒ¹é… â†’ æ‰¾åˆ° PROB-002ï¼ˆ3æ¬¡å‡ºç°ï¼‰
2. è¿”å›è§£å†³æ–¹æ¡ˆ: `mobile-responsive-test-report-2026-02-07.md`
3. éªŒè¯: ä¸Šä¸‹æ–‡âœ“ã€æ—¶é—´âœ“
4. **è´¨é‡æ£€æŸ¥**: æ–‡æ¡£æ ‡è®° "æµ‹è¯•å¤±è´¥åŸå› æ˜¯é€‰æ‹©å™¨é—®é¢˜ï¼ŒåŠŸèƒ½æ­£å¸¸"
5. ç½®ä¿¡åº¦: 88/100 (é«˜)
6. å¼•ç”¨è§£å†³æ–¹æ¡ˆå¹¶è¯´æ˜åŸå› 

## å‚è€ƒæ–‡æ¡£

- [æœç´¢æ¨¡å¼è¯¦è§£](references/search-patterns.md) - 5ç§æœç´¢æ¨¡å¼çš„è¯¦ç»†è¯´æ˜
- [åŒ¹é…è§„åˆ™è¯¦è§£](references/matching-rules.md) - ç½®ä¿¡åº¦è®¡ç®—å’ŒåŒ¹é…ç®—æ³•
- [æƒé‡ç®—æ³•è¯¦è§£](references/weight-algorithm.md) - æƒé‡è®¡ç®—å…¬å¼å’Œè°ƒä¼˜

## è„šæœ¬å·¥å…·

### æ„å»ºç´¢å¼•
```bash
python scripts/build_index.py
```

### æœç´¢ç´¢å¼•
```bash
python scripts/search_index.py "å…³é”®è¯"
```

### æ›´æ–°æƒé‡
```bash
python scripts/update_weights.py
```

## é…ç½®æ–‡ä»¶

é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.knowledge-index-config.json`:

```json
{
  "project_name": "VideoFly",
  "docs_dir": "docs/",
  "index_dir": "docs/knowledge-index/",
  "modules": {
    "xiaohongshu-cover": {
      "keywords": ["å°çº¢ä¹¦", "å°é¢", "xiaohongshu", "cover"],
      "patterns": ["xiaohongshu-cover-*.md", "cover-*.md"]
    },
    "video-generator": {
      "keywords": ["è§†é¢‘", "ç”Ÿæˆ", "video", "generator"],
      "patterns": ["video-*.md", "generator-*.md"]
    }
  },
  "auto_update": true,
  "quality_threshold": 0.7
}
```

## æ•…éšœæ’æŸ¥

### ç´¢å¼•ä¸å­˜åœ¨

**é—®é¢˜**: æç¤º"ç´¢å¼•ä¸å­˜åœ¨ï¼Œéœ€è¦åˆå§‹åŒ–"

**è§£å†³**: é€‰æ‹©"è‡ªåŠ¨åˆ›å»º"é€‰é¡¹ï¼ŒæŠ€èƒ½ä¼šè‡ªåŠ¨æ‰«æå¹¶æ„å»ºç´¢å¼•

### æœç´¢æ— ç»“æœ

**é—®é¢˜**: æœç´¢è¿”å›ç©ºç»“æœ

**å¯èƒ½åŸå› **:
1. å…³é”®è¯ä¸å‡†ç¡® â†’ å°è¯•å…¶ä»–å…³é”®è¯
2. æ–‡æ¡£æœªç´¢å¼• â†’ è¿è¡Œ `build_index.py` é‡å»ºç´¢å¼•
3. æ–‡æ¡£è¢«åˆ é™¤ â†’ æ£€æŸ¥æ–‡æ¡£çŠ¶æ€

### æƒé‡å¼‚å¸¸

**é—®é¢˜**: æœç´¢ç»“æœæ’åºä¸åˆç†

**è§£å†³**: è¿è¡Œ `update_weights.py` é‡æ–°è®¡ç®—æƒé‡

---

**æŠ€èƒ½ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2026-02-08
**ç»´æŠ¤è€…**: Faizlee & Claude
